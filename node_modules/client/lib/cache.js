module.exports=Cache;
function Cache() {

}
Cache.init=function(){
    if(!Cache.ins){
        Cache.ins=new Array();
    }
}
Cache.add=function(id,index,timeout,callback){
    var key=id+':'+index;
    var stub={};
    stub.callback=callback;

    var t=setTimeout(function () {
        delete Cache.ins[key];
        callback('rtcp request timeout');
    },timeout*1000);
    stub.timeout=t;
    Cache.ins[key]=stub;
}
Cache.delete=function(id,index,err,result){
    var key=id+':'+index;
    if(Cache.ins[key]){
        var callback=Cache.ins[key].callback;
        clearTimeout(Cache.ins[key].timeout);
        delete Cache.ins[key];
        if(err){
            callback(err);
        }else{
            callback(null,result);
        }
    }else{
        console.log('rtcp response key error:'+key);
    }
}
Cache.init();
